<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    
    <!--custom css-->
    <link rel="stylesheet" href="/admin/css/global.css">
    <link rel="stylesheet" href="/admin/css/dashboard.css">

    <!--js to check auth-->
    <script src="/admin/js/dashboardAuth.js"></script>
    <title>Admin Dashboard</title>
  </head>
  <body>
      
    
    <div class="main-container">

      <div class="row g-0">

        <!--sidebar start-->
        <div class="col-3 p-3 sidebar-container">

          <div class=" shadow-sm rounded bg-white sidebar">

            <div class="list-group">
              <a href="/admin/dashboard" class="list-group-item list-group-item-action active" aria-current="true">
                <img class = "sidebar-icon" src="/admin/assets/icons/home-icon.png" alt="home-icon.png" srcset=""> Home
              </a>
              <a href="/admin/dashboard/posts" class="list-group-item list-group-item-action">
                <img class = "sidebar-icon" src="/admin/assets/icons/posts-icon.png" alt="posts-icon.png" srcset="">
                Posts
              </a>
               </div>
            
          </div>
          
        </div>
        <!--sidebar end-->

        <!--content start-->
        <div class="col-9 p-3 content-container">

          <div class=" shadow-sm rounded bg-white content">

            <!--charts start-->

            <div class="row">

              <div class="col">
                <div class = "p-4">
                  <!--chart start-->
                  <canvas id="myLineChart"></canvas>
                  <!--chart end-->
                </div>
              </div>


            </div>


            <!--charts end-->

            <!--logout button start-->
            <div class="row">

              <div class="col">
                <div class = "p-4">
                  <button class = "btn btn-secondary" id = "logoutButton">Log out</button>
                  <script>
                    logoutBtn = document.getElementById('logoutButton')

                    //declare reuest options
                    url = `/users/logout`
                    params = {
                      headers : {
                          "Authorization" : `Bearer ${getCookie('jwt')}`
                      },
                      method : "POST"
                    }

                    logoutBtn.onclick = ()=>{
                      //fetch
                      fetch(url,params)
                      .then(response => response.json())
                      .then((data)=>{
   
                        //if error exists in resposne then redirect user back to login page
                          if(data.Error){
                              alert(data.Error)
                              window.location.href = '/admin'
                          }else{
                            window.location.href = '/admin'
                          }
                      }

                      )
                      .catch((error)=>{
                        alert(error)
                        console.info(error)
                      })
                    }


                  </script>
                </div>
              </div>


            </div>
            <!--logout button end-->

            
            
          </div>
          
        </div>
        <!--content end-->

      </div>

    </div>
    

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->

    <!--chart js-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!--chart setup js-->
    <script src="/admin/js/chart.js"></script>
  </body>
</html>